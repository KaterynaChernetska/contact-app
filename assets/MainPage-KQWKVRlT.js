import{r as u,u as f,j as e,c as R,g,a as F,L as w,d as O,b as _,e as E}from"./index-Dw-qMYR2.js";const P=()=>{const[a,t]=u.useState(""),[i,l]=u.useState(""),[r,o]=u.useState(""),[d,c]=u.useState(""),m=f(),p=async n=>{if(n.preventDefault(),!a&&!i){c("At least one of First Name or Last Name is required.");return}if(!r||!/\S+@\S+\.\S+/.test(r)){c("A valid email is required.");return}c(""),await m(R({fields:{"first name":[{value:a,modifier:"",label:"first name"}],"last name":[{value:i,modifier:"",label:"last name"}],email:[{value:r,modifier:"",label:"email"}]},record_type:"person",privacy:{edit:null,read:null},owner_id:null})),m(g()),t(""),l(""),o("")};return e.jsxs("form",{onSubmit:p,children:[e.jsx("h2",{className:"form-title",children:"Create New Contact"}),e.jsxs("div",{className:"form",children:[d&&e.jsx("p",{className:"form-error",children:d}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"firstName",className:"form-label",children:"First Name"}),e.jsx("input",{type:"text",id:"firstName",value:a,onChange:n=>t(n.target.value),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"lastName",className:"form-label",children:"Last Name"}),e.jsx("input",{type:"text",id:"lastName",value:i,onChange:n=>l(n.target.value),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:r,onChange:n=>o(n.target.value),className:"form-input"})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Create Contact"})]})]})},L="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23AAC1F0'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M19%206.41L17.59%205%2012%2010.59%206.41%205%205%206.41%2010.59%2012%205%2017.59%206.41%2019%2012%2013.41%2017.59%2019%2019%2017.59%2013.41%2012z'/%3e%3c/svg%3e";var j={exports:{}},q="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",D=q,k=D;function y(){}function b(){}b.resetWarningCache=y;var I=function(){function a(l,r,o,d,c,m){if(m!==k){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}a.isRequired=a;function t(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:t,element:a,elementType:a,instanceOf:t,node:a,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:b,resetWarningCache:y};return i.PropTypes=i,i};j.exports=I();var A=j.exports;const s=F(A),C=({contact:a})=>{var p,n,h,x,v,N;const t=f(),{id:i,avatar_url:l,fields:r,tags:o}=a,d=((n=(p=r.email)==null?void 0:p[0])==null?void 0:n.value)||"No email available",c=((x=(h=r["first name"])==null?void 0:h[0])==null?void 0:x.value)||"No first name available",m=((N=(v=r["last name"])==null?void 0:v[0])==null?void 0:N.value)||"No last name available";return e.jsxs(e.Fragment,{children:[e.jsxs(w,{className:"contact-link",to:`/contact/${i}`,children:[e.jsx("img",{className:"avatar-image",src:l,alt:`${c} ${m}`}),e.jsxs("div",{children:[e.jsxs("span",{children:[" ",c]}),e.jsxs("span",{children:[" ",m]}),e.jsxs("p",{className:"contact-email",children:[" ",d]}),o.length>0&&e.jsx("ul",{className:"tags-list",children:o==null?void 0:o.map(({id:S,tag:T})=>e.jsx("li",{children:T},S))})]})]}),e.jsx("button",{className:"delete-contact-btn",onClick:()=>t(O(i)),children:e.jsx("img",{src:L})})]})};C.propTypes={contact:s.shape({id:s.string.isRequired,avatar_url:s.string,fields:s.shape({"first name":s.arrayOf(s.shape({value:s.string.isRequired})),"last name":s.arrayOf(s.shape({value:s.string.isRequired})),email:s.arrayOf(s.shape({value:s.string.isRequired}))}),tags:s.arrayOf(s.shape({id:s.string.isRequired,tag:s.string.isRequired}))}).isRequired};const W=()=>{const a=f(),{contacts:t,loading:i,error:l}=_(r=>r.contacts);return u.useEffect(()=>{a(g())},[a]),e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"contacts-header",children:"Contacts"}),i?e.jsx(E,{}):e.jsxs("ul",{className:"contact-list",children:[l&&e.jsxs("p",{children:["Oops, some error occurred... Message: ",l]}),t==null?void 0:t.map(r=>e.jsx("li",{className:"contact-list-item",children:e.jsx(C,{contact:r})},r.id))]})]})},V=()=>e.jsxs("div",{className:"main-container",children:[e.jsx("div",{className:"contact-form-container",children:e.jsx(P,{})}),e.jsx("div",{className:"contact-list-container",children:e.jsx(W,{})})]});export{V as default};
